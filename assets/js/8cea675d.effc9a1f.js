"use strict";(self.webpackChunkdreamlab_docs=self.webpackChunkdreamlab_docs||[]).push([[895],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>d});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},y=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(n),y=a,d=u["".concat(s,".").concat(y)]||u[y]||m[y]||o;return n?r.createElement(d,l(l({ref:t},c),{},{components:n})):r.createElement(d,l({ref:t},c))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=y;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[u]="string"==typeof e?e:a,l[1]=i;for(var p=2;p<o;p++)l[p]=n[p];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}y.displayName="MDXCreateElement"},3778:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const o={},l="Events",i={unversionedId:"concepts/events",id:"concepts/events",title:"Events",description:"Dreamlab's engine uses events to notify code of things happening in the game world.",source:"@site/docs/concepts/events.md",sourceDirName:"concepts",slug:"/concepts/events",permalink:"/concepts/events",draft:!1,editUrl:"https://github.com/WorldQL/dreamlab-docs/tree/trunk/docs/concepts/events.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Animated Sprites",permalink:"/concepts/animated-sprites"},next:{title:"Graphics",permalink:"/concepts/graphics"}},s={},p=[{value:"Custom Events",id:"custom-events",level:2}],c={toc:p},u="wrapper";function m(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"events"},"Events"),(0,a.kt)("p",null,"Dreamlab's engine uses events to notify code of things happening in the game world."),(0,a.kt)("p",null,"There are several events built-in. Here are some examples and when they're emitted:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Client only",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"onRenderFrame"),", a frame is rendered"))),(0,a.kt)("li",{parentName:"ul"},"Server only",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"onPlayerJoin"),", a player connects"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"onPlayerQuit"),", a player disconnects"))),(0,a.kt)("li",{parentName:"ul"},"Common (client and server)",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"onInstantiate"),", an entity is instantiated. Only used for camera, cursor, and the default player entities"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"onSpawn"),", an entity is spawned that was defined using ",(0,a.kt)("inlineCode",{parentName:"li"},"createSpawnableEntity")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"onDestroy"),", an entity is destroyed and removed from the level")))),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/WorldQL/dreamlab-core/blob/trunk/src/events.ts"},"You can view a full list of all built-in events and their payload types here"),"."),(0,a.kt)("h2",{id:"custom-events"},"Custom Events"),(0,a.kt)("p",null,'You can use custom events for any scenario in your game. For example, let\'s say you had an RPG with an "Ice Boss" monster and you wanted to give the player that delivered the final blow some XP.'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'// write an interface to type your custom event\ninterface MyExampleGameEvents {\n  // you can optionally prefix your event names to make sure they don\'t collide with other content\n  "@MyGame/iceBossDeath": [lastHit: Player];\n  "@MyGame/playerEarnedXP": [player: Player, amount: number];\n}\n\n// Declare a variable to represent your custom events.\nconst myEvents = game.events.custom as EventEmitter<MyExampleGameEvents>;\n\n// Listen for the boss death event\nmyEvents.on("@MyGame/iceBossDeath", (player) => {\n  // give the player 100 xp\n  myEvents.emit("@MyGame/playerEarnedXP", player, 1000);\n});\n\n// Listen for the player earning XP event.\nmyEvents.on("@MyGame/playerEarnedXP", async (player, amount) => {\n  // Update player\'s XP.\n  // Events are great here because this requires async key-value DB operations\n  \n  let playerXP = amount;\n  const oldXP = await kv.player(player.id).get("XP");\n  if (oldXP) {\n    playerXP += parseFloat(oldXP);\n  }\n\n  await kv.player(player.id).set("XP", xpReward);\n\n  // Now we can update UI, etc...\n});\n')))}m.isMDXComponent=!0}}]);